<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citations</title>
</head>

<body></body>
<button id="previouspage">Page precedante</button>
<button id="nextpage">Page suivante</button>
<div id="quotes"></div>
</body>
<script>

    let page = 1;
    let maxPage = 1;

    async function fetchAllQuotes(page) {
        try {
            const response = await fetch(`http://api.quotable.io/quotes?page=${page}`);
            if (!response.ok) {
                throw new Error(`Error fetching quotes: ${response.statusText}`);
            }
            const data = await response.json();
            return data;
        } catch (error) {
            console.error(error.message);
            return "Unable to fetch quotes";
        }
    }

    function formatQuotes(quotes) {
        let data = "";
        quotes.results.forEach((quote) => {
            data += quote.content + " - " + quote.author + "<br><br>";
        });
        return data;
    }

    async function displayQuotes(page) {
        let div = document.querySelector("#quotes");
        let quotes = await fetchAllQuotes(page);
        maxPage = quotes.totalPages;
        div.innerHTML = formatQuotes(quotes);
    }

    function nextPage() {
        page++
        displayQuotes(page)
    }

    function previousPage() {
        if (page > 0) {
            page--
        }
        displayQuotes(page)
    }

    let nextPageButton = document.querySelector("#nextpage");
    nextPageButton.addEventListener("click", nextPage)

    let previousPageButton = document.querySelector("#previouspage");
    previousPageButton.addEventListener("click", previousPage)


    displayQuotes(page);

</script>

</html>